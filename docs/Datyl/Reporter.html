<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>
  Class: Datyl::Reporter
  
    &mdash; datyl: daitss utilities
  
</title>

  <link rel="stylesheet" href="../css/style.css" type="text/css" media="screen" charset="utf-8" />

  <link rel="stylesheet" href="../css/common.css" type="text/css" media="screen" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  relpath = '..';
  if (relpath != '') relpath += '/';
</script>

  <script type="text/javascript" charset="utf-8" src="../js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="../js/app.js"></script>


  </head>
  <body>
    <script type="text/javascript" charset="utf-8">
      if (window.top.frames.main) document.body.className = 'frames';
    </script>
    
    <div id="header">
      <div id="menu">
  
    <a href="../_index.html">Index (R)</a> &raquo; 
    <span class='title'><span class='object_link'><a href="../Datyl.html" title="Datyl (module)">Datyl</a></span></span>
     &raquo; 
    <span class="title">Reporter</span>
  
  
  <div class="noframes"><span class="title">(</span><a href="." target="_top">no frames</a><span class="title">)</span></div>
</div>

      <div id="search">
  
    <a id="class_list_link" href="#">Class List</a>
  
    <a id="method_list_link" href="#">Method List</a>
  
    <a id="file_list_link" href="#">File List</a>
  
</div>
      <div class="clear"></div>
    </div>
    
    <iframe id="search_frame"></iframe>
    
    <div id="content"><h1>Class: Datyl::Reporter
  
  
  
</h1>

<dl class="box">
  
    <dt class="r1">Inherits:</dt>
    <dd class="r1">
      <span class="inheritName">Object</span>
      
        <ul class="fullTree">
          <li>Object</li>
          
            <li class="next">Datyl::Reporter</li>
          
        </ul>
        <a href="#" class="inheritanceTree">show all</a>
      
      </dd>
    
  
  
    
  
    
  
  
  
    <dt class="r2 last">Defined in:</dt>
    <dd class="r2 last">/Users/fischer/WorkProjects/daitss2/datyl/lib/datyl/reporter.rb</dd>
  
</dl>
<div class="clear"></div>

<h2>Overview</h2><div class="docstring">
  <div class="discussion">
    
<p>This class combines logging and an abbreviated, written report. The Logger
system is assumed to have been initialized (logging will be a no-op
otherwise).</p>

<p>Create a reporter object by initializing with a Title and an optional
Subtitle. Example:</p>

<pre class="code"><span class='rep identifier id'>rep</span> <span class='assign token'>=</span> <span class='Reporter constant id'>Reporter</span><span class='dot token'>.</span><span class='new identifier id'>new</span> <span class='string val'>'Important Report'</span><span class='comma token'>,</span> <span class='string val'>'This could be very important'</span>

<span class='rep identifier id'>rep</span><span class='dot token'>.</span><span class='info identifier id'>info</span> <span class='string val'>'This is a test.'</span>      <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='Logs constant id'>Logs</span> <span class='an identifier id'>an</span> <span class='info identifier id'>info</span><span class='minus op'>-</span><span class='level identifier id'>level</span> <span class='message identifier id'>message</span><span class='colon op'>:</span>     <span class='string val'>'Important Report: This is a test.'</span>
<span class='rep identifier id'>rep</span><span class='dot token'>.</span><span class='warn identifier id'>warn</span> <span class='string val'>'This is a warning.'</span>   <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='Logs constant id'>Logs</span> <span class='an identifier id'>an</span> <span class='warning identifier id'>warning</span><span class='minus op'>-</span><span class='level identifier id'>level</span> <span class='message identifier id'>message</span><span class='colon op'>:</span>  <span class='string val'>'Important Report: This is a warning.'</span>
<span class='rep identifier id'>rep</span><span class='dot token'>.</span><span class='err identifier id'>err</span>  <span class='string val'>'This is an error.'</span>    <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='Logs constant id'>Logs</span> <span class='an identifier id'>an</span> <span class='error identifier id'>error</span><span class='minus op'>-</span><span class='level identifier id'>level</span> <span class='message identifier id'>message</span><span class='colon op'>:</span>    <span class='string val'>'Important Report: This is an error.'</span>

<span class='rep identifier id'>rep</span><span class='dot token'>.</span><span class='write identifier id'>write</span> <span class='STDERR constant id'>STDERR</span>   <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='Produces constant id'>Produces</span> <span class='on identifier id'>on</span> <span class='STDERR constant id'>STDERR</span><span class='colon op'>:</span>

                      <span class='Important constant id'>Important</span> <span class='Report constant id'>Report</span><span class='colon op'>:</span> <span class='This constant id'>This</span> <span class='could identifier id'>could</span> <span class='be identifier id'>be</span> <span class='very identifier id'>very</span> <span class='important identifier id'>important</span>
                      <span class='eqq op'>===</span><span class='eqq op'>===</span><span class='eqq op'>===</span><span class='eqq op'>===</span><span class='eqq op'>===</span><span class='eqq op'>===</span><span class='eqq op'>===</span><span class='eqq op'>===</span><span class='eqq op'>===</span><span class='eqq op'>===</span><span class='eqq op'>===</span><span class='eqq op'>===</span><span class='eqq op'>===</span><span class='eqq op'>===</span><span class='eqq op'>===</span><span class='assign token'>=</span>
                      <span class='This constant id'>This</span> <span class='is identifier id'>is</span> <span class='a identifier id'>a</span> <span class='test identifier id'>test</span><span class='dot token'>.</span>
                      <span class='This constant id'>This</span> <span class='is identifier id'>is</span> <span class='a identifier id'>a</span> <span class='warning identifier id'>warning</span><span class='dot token'>.</span>
                      <span class='This constant id'>This</span> <span class='is identifier id'>is</span> <span class='an identifier id'>an</span> <span class='error identifier id'>error</span><span class='dot token'>.</span>
</pre>

<p>Note: the subtitle is only included in the written report;
info/warning/errors are distinguished only in the logs.  The Title is
included for each logged line: keep it short - use the Subtitle to expand
the heading for the written reports.  Set the class attribute
Reporter.max_lines_to_write to limit the number of lines written in any
particular report; it will print the first and last lines of the report if
the number of lines goes over that value (intially, 1000 lines).  A blank
line is added after the text of the written report.</p>


  </div>
</div>
<div class="tags">
  

</div>
  <h2>Constant Summary</h2>
  
    <dl class="constants">
      
        <dt id="max_lines-classvariable" class="">@@max_lines =
          <div class="docstring">
  <div class="discussion">
    
<p>will only write this many lines of text - first half, ‘…’, second
half.</p>


  </div>
</div>
<div class="tags">
  

</div>
        </dt>
        <dd><pre class="code"><span class='integer val'>2000</span>
</pre></dd>
      
    </dl>
  


  <h2>Instance Attribute Summary <small>(<a href="#" class="summary_toggle">collapse</a>)</small></h2>
  <ul class="summary">
    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#counter-instance_method" title="#counter (instance method)">- (Object) <strong>counter</strong> </a>
    

    
  </span>
  
  
    <span class="note title readonly">readonly</span>
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns the value of attribute counter.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#title-instance_method" title="#title (instance method)">- (Object) <strong>title</strong> </a>
    

    
  </span>
  
  
    <span class="note title readonly">readonly</span>
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns the value of attribute title.</p>
</div></span>
  
</li>

    
  </ul>




  
    <h2>
      Class Method Summary
      <small>(<a href="#" class="summary_toggle">collapse</a>)</small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#max_lines_to_write-class_method" title="max_lines_to_write (class method)">+ (Object) <strong>max_lines_to_write</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#max_lines_to_write%3D-class_method" title="max_lines_to_write= (class method)">+ (Object) <strong>max_lines_to_write=</strong>(num) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#note-class_method" title="note (class method)">+ (Object) <strong>note</strong>(message, io = STDOUT) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>A class version of the above which is immediately written out - it’s a
convenience routine.</p>
</div></span>
  
</li>

      
    </ul>
  
    <h2>
      Instance Method Summary
      <small>(<a href="#" class="summary_toggle">collapse</a>)</small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#_bottom_lines-instance_method" title="#_bottom_lines (instance method)">- (Object) <strong>_bottom_lines</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#_top_lines-instance_method" title="#_top_lines (instance method)">- (Object) <strong>_top_lines</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#dolog-instance_method" title="#dolog (instance method)">- (Object) <strong>dolog</strong>(*strs) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Support for logging messages at various severity levels; slightly
abbreviated data is recorded to a playback file.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#done-instance_method" title="#done (instance method)">- (Object) <strong>done</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>for debugging - if you call ‘done’ the report will add to the title its
total runtime - from the creation time of the constructor to the point
‘done’ was called.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#each-instance_method" title="#each (instance method)">- (Object) <strong>each</strong> {|title| ... }</a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Cycle through everything that’s been written, yielding a line; if the
report is large, the <b>middle</b> of the report is truncated.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#err-instance_method" title="#err (instance method)">- (Object) <strong>err</strong>(*strs) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Log messages using the ERR severity.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#info-instance_method" title="#info (instance method)">- (Object) <strong>info</strong>(*strs) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Log messages using the INFO severity.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#initialize-instance_method" title="#initialize (instance method)">- (Reporter) <strong>initialize</strong>(title, sub = nil) </a>
    

    
  </span>
  
    <span class="note title constructor">constructor</span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>A new instance of Reporter.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#interesting%3F-instance_method" title="#interesting? (instance method)">- (Boolean) <strong>interesting?</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>interesting? is true if anything has been reported - some reports could be
empty.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#rewind-instance_method" title="#rewind (instance method)">- (Object) <strong>rewind</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#warn-instance_method" title="#warn (instance method)">- (Object) <strong>warn</strong>(*strs) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Log messages using the WARN severity.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#write-instance_method" title="#write (instance method)">- (Object) <strong>write</strong>(io = STDOUT) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Write the report to the provided IO object, STDOUT by default.</p>
</div></span>
  
</li>

      
    </ul>
  

<div id="constructor_details" class="method_details_list">
  <h2>Constructor Details</h2>
  
    <div class="method_details first">
  <p class="signature first" id="initialize-instance_method">
  
    - (<tt><span class='object_link'><a href="" title="Datyl::Reporter (class)">Reporter</a></span></tt>) <strong>initialize</strong>(title, sub = nil) 
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>A new instance of Reporter</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


45
46
47
48
49
50
51
52
53
54
55</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File '/Users/fischer/WorkProjects/daitss2/datyl/lib/datyl/reporter.rb', line 45</span>

<span class='def def kw'>def</span> <span class='initialize identifier id'>initialize</span> <span class='title identifier id'>title</span><span class='comma token'>,</span> <span class='sub identifier id'>sub</span> <span class='assign token'>=</span> <span class='nil nil kw'>nil</span>
  <span class='@start ivar id'>@start</span>     <span class='assign token'>=</span> <span class='Time constant id'>Time</span><span class='dot token'>.</span><span class='now identifier id'>now</span>
  <span class='@done ivar id'>@done</span>      <span class='assign token'>=</span> <span class='nil nil kw'>nil</span>
  <span class='@counter ivar id'>@counter</span>   <span class='assign token'>=</span> <span class='integer val'>0</span>
  <span class='@title ivar id'>@title</span>     <span class='assign token'>=</span> <span class='title identifier id'>title</span>
  <span class='@subtitle ivar id'>@subtitle</span>  <span class='assign token'>=</span> <span class='sub identifier id'>sub</span>
  <span class='@tempfile ivar id'>@tempfile</span>  <span class='assign token'>=</span> <span class='Tempfile constant id'>Tempfile</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='lparen token'>(</span><span class='dstring node'>&quot;report-#{title.split(/\s+/).map{ |word| word.gsub(/[^a-zA-Z0-9]/, '').downcase }.join('-')}-&quot;</span><span class='rparen token'>)</span>
  <span class='@tempfile ivar id'>@tempfile</span><span class='dot token'>.</span><span class='unlink identifier id'>unlink</span>
<span class='rescue rescue kw'>rescue</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='e identifier id'>e</span>
  <span class='Logger constant id'>Logger</span><span class='dot token'>.</span><span class='error identifier id'>error</span> <span class='dstring node'>&quot;Fatal error in Reporter module; #{e.class}: #{e.message}&quot;</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
  
</div>

  <div id="instance_attr_details" class="attr_details">
    <h2>Instance Attribute Details</h2>
    
      
      <span id=""></span>
      <span id="counter-instance_method"></span>
      <div class="method_details first">
  <p class="signature first" id="counter-instance_method">
  
    - (<tt>Object</tt>) <strong>counter</strong>  <span class="extras">(readonly)</span>
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>Returns the value of attribute counter</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


43
44
45</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File '/Users/fischer/WorkProjects/daitss2/datyl/lib/datyl/reporter.rb', line 43</span>

<span class='def def kw'>def</span> <span class='counter identifier id'>counter</span>
  <span class='@counter ivar id'>@counter</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id=""></span>
      <span id="title-instance_method"></span>
      <div class="method_details ">
  <p class="signature " id="title-instance_method">
  
    - (<tt>Object</tt>) <strong>title</strong>  <span class="extras">(readonly)</span>
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>Returns the value of attribute title</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


43
44
45</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File '/Users/fischer/WorkProjects/daitss2/datyl/lib/datyl/reporter.rb', line 43</span>

<span class='def def kw'>def</span> <span class='title identifier id'>title</span>
  <span class='@title ivar id'>@title</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
  </div>


  <div id="class_method_details" class="method_details_list">
    <h2>Class Method Details</h2>
    
    
      <div class="method_details first">
  <p class="signature first" id="max_lines_to_write-class_method">
  
    + (<tt>Object</tt>) <strong>max_lines_to_write</strong> 
  

  
</p><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


57
58
59</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File '/Users/fischer/WorkProjects/daitss2/datyl/lib/datyl/reporter.rb', line 57</span>

<span class='def def kw'>def</span> <span class='self self kw'>self</span><span class='dot token'>.</span><span class='max_lines_to_write identifier id'>max_lines_to_write</span>
  <span class='@@max_lines ivar id'>@@max_lines</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="max_lines_to_write=-class_method">
  
    + (<tt>Object</tt>) <strong>max_lines_to_write=</strong>(num) 
  

  
</p><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


61
62
63</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File '/Users/fischer/WorkProjects/daitss2/datyl/lib/datyl/reporter.rb', line 61</span>

<span class='def def kw'>def</span> <span class='self self kw'>self</span><span class='dot token'>.</span><span class='max_lines_to_write identifier id'>max_lines_to_write</span><span class='assign token'>=</span> <span class='num identifier id'>num</span>
  <span class='@@max_lines ivar id'>@@max_lines</span> <span class='assign token'>=</span> <span class='num identifier id'>num</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="note-class_method">
  
    + (<tt>Object</tt>) <strong>note</strong>(message, io = STDOUT) 
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>A class version of the above which is immediately written out - it’s a
convenience routine.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


177
178
179
180</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File '/Users/fischer/WorkProjects/daitss2/datyl/lib/datyl/reporter.rb', line 177</span>

<span class='def def kw'>def</span> <span class='self self kw'>self</span><span class='dot token'>.</span><span class='note identifier id'>note</span> <span class='message identifier id'>message</span><span class='comma token'>,</span> <span class='io identifier id'>io</span> <span class='assign token'>=</span> <span class='STDOUT constant id'>STDOUT</span>
  <span class='Logger constant id'>Logger</span><span class='dot token'>.</span><span class='info identifier id'>info</span> <span class='message identifier id'>message</span>
  <span class='io identifier id'>io</span><span class='dot token'>.</span><span class='puts identifier id'>puts</span> <span class='message identifier id'>message</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>
    
    
      <div class="method_details first">
  <p class="signature first" id="_bottom_lines-instance_method">
  
    - (<tt>Object</tt>) <strong>_bottom_lines</strong> 
  

  
</p><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


120
121
122</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File '/Users/fischer/WorkProjects/daitss2/datyl/lib/datyl/reporter.rb', line 120</span>

<span class='def def kw'>def</span> <span class='_bottom_lines identifier id'>_bottom_lines</span>
  <span class='@@max_lines ivar id'>@@max_lines</span> <span class='div op'>/</span> <span class='integer val'>2</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="_top_lines-instance_method">
  
    - (<tt>Object</tt>) <strong>_top_lines</strong> 
  

  
</p><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


116
117
118</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File '/Users/fischer/WorkProjects/daitss2/datyl/lib/datyl/reporter.rb', line 116</span>

<span class='def def kw'>def</span> <span class='_top_lines identifier id'>_top_lines</span>
  <span class='@@max_lines ivar id'>@@max_lines</span> <span class='div op'>/</span> <span class='integer val'>2</span> <span class='plus op'>+</span> <span class='lparen token'>(</span><span class='@@max_lines ivar id'>@@max_lines</span><span class='dot token'>.</span><span class='odd? fid id'>odd?</span> <span class='integer val'>? </span><span class='integer val'>1</span> <span class='colon op'>:</span> <span class='integer val'>0</span><span class='rparen token'>)</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="dolog-instance_method">
  
    - (<tt>Object</tt>) <strong>dolog</strong>(*strs) 
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>Support for logging messages at various severity levels; slightly
abbreviated data is recorded to a playback file.  Called with no arguments,
just insert a blank line the playback file.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


76
77
78
79
80
81
82
83
84
85</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File '/Users/fischer/WorkProjects/daitss2/datyl/lib/datyl/reporter.rb', line 76</span>

<span class='def def kw'>def</span> <span class='dolog identifier id'>dolog</span> <span class='mult op'>*</span><span class='strs identifier id'>strs</span>
  <span class='@counter ivar id'>@counter</span> <span class='opasgn op'>+=</span> <span class='integer val'>1</span>
  
  <span class='strs identifier id'>strs</span><span class='dot token'>.</span><span class='each identifier id'>each</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='str identifier id'>str</span><span class='bitor op'>|</span>
    <span class='yield yield kw'>yield</span> <span class='@title ivar id'>@title</span> <span class='plus op'>+</span> <span class='string val'>': '</span> <span class='plus op'>+</span> <span class='str identifier id'>str</span> <span class='unless unless_mod kw'>unless</span> <span class='str identifier id'>str</span><span class='dot token'>.</span><span class='empty? fid id'>empty?</span>
    <span class='@tempfile ivar id'>@tempfile</span><span class='dot token'>.</span><span class='puts identifier id'>puts</span> <span class='str identifier id'>str</span>
  <span class='end end kw'>end</span>

  <span class='@tempfile ivar id'>@tempfile</span><span class='dot token'>.</span><span class='puts identifier id'>puts</span><span class='lparen token'>(</span><span class='string val'>''</span><span class='rparen token'>)</span> <span class='if if_mod kw'>if</span> <span class='strs identifier id'>strs</span><span class='dot token'>.</span><span class='empty? fid id'>empty?</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="done-instance_method">
  
    - (<tt>Object</tt>) <strong>done</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>for debugging - if you call ‘done’ the report will add to the title its
total runtime - from the creation time of the constructor to the point
‘done’ was called</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


69
70
71</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File '/Users/fischer/WorkProjects/daitss2/datyl/lib/datyl/reporter.rb', line 69</span>

<span class='def def kw'>def</span> <span class='done identifier id'>done</span>
  <span class='@done ivar id'>@done</span> <span class='assign token'>=</span> <span class='Time constant id'>Time</span><span class='dot token'>.</span><span class='now identifier id'>now</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="each-instance_method">
  
    - (<tt>Object</tt>) <strong>each</strong> {|title| ... }
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>Cycle through everything that’s been written, yielding a line; if the
report is large, the <b>middle</b> of the report is truncated. It’s meant
to be used in email reports. Only a total @@max_lines is provided split
equally from from the the begginning and the end.</p>


  </div>
</div>
<div class="tags">
  
<h3>Yields:</h3>
<ul class="yield">
  
    <li>
      
      
        <span class='type'>(<tt>title</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File '/Users/fischer/WorkProjects/daitss2/datyl/lib/datyl/reporter.rb', line 130</span>

<span class='def def kw'>def</span> <span class='each identifier id'>each</span>
  <span class='title identifier id'>title</span> <span class='assign token'>=</span> <span class='@title ivar id'>@title</span> <span class='plus op'>+</span> <span class='lparen token'>(</span><span class='@subtitle ivar id'>@subtitle</span> <span class='question op'>?</span> <span class='dstring node'>&quot;: #{@subtitle}&quot;</span> <span class='colon op'>:</span> <span class='string val'>''</span><span class='rparen token'>)</span> <span class='plus op'>+</span>  <span class='lparen token'>(</span><span class='@done ivar id'>@done</span> <span class='question op'>?</span> <span class='sprintf identifier id'>sprintf</span><span class='lparen token'>(</span><span class='string val'>&quot; (%3.2f seconds)&quot;</span><span class='comma token'>,</span> <span class='@done ivar id'>@done</span> <span class='minus op'>-</span> <span class='@start ivar id'>@start</span><span class='rparen token'>)</span> <span class='colon op'>:</span> <span class='string val'>''</span><span class='rparen token'>)</span>
  <span class='yield yield kw'>yield</span> <span class='title identifier id'>title</span>
  <span class='yield yield kw'>yield</span> <span class='title identifier id'>title</span><span class='dot token'>.</span><span class='gsub identifier id'>gsub</span><span class='lparen token'>(</span><span class='regexp val'>/./</span><span class='comma token'>,</span> <span class='string val'>':'</span><span class='rparen token'>)</span>

  <span class='@tempfile ivar id'>@tempfile</span><span class='dot token'>.</span><span class='rewind identifier id'>rewind</span>

  <span class='if if kw'>if</span> <span class='@counter ivar id'>@counter</span> <span class='gt op'>&gt;</span> <span class='@@max_lines ivar id'>@@max_lines</span>
    <span class='yield yield kw'>yield</span> <span class='dstring node'>&quot;Note: #{@counter - @@max_lines} of #{@counter} lines were discarded - see the system log for the complete report.&quot;</span>

    <span class='_top_lines identifier id'>_top_lines</span><span class='dot token'>.</span><span class='times identifier id'>times</span>  <span class='lbrace token'>{</span> <span class='yield yield kw'>yield</span> <span class='@tempfile ivar id'>@tempfile</span><span class='dot token'>.</span><span class='gets identifier id'>gets</span> <span class='rbrace token'>}</span>           <span class='comment val'># print first half</span>

    <span class='@tempfile ivar id'>@tempfile</span><span class='dot token'>.</span><span class='rewind identifier id'>rewind</span>

    <span class='lparen token'>(</span><span class='@counter ivar id'>@counter</span> <span class='minus op'>-</span> <span class='_bottom_lines identifier id'>_bottom_lines</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='times identifier id'>times</span> <span class='lbrace token'>{</span> <span class='@tempfile ivar id'>@tempfile</span><span class='dot token'>.</span><span class='gets identifier id'>gets</span> <span class='rbrace token'>}</span>  <span class='comment val'># discard middle</span>

    <span class='yield yield kw'>yield</span> <span class='string val'>&quot; ...&quot;</span>

    <span class='while while kw'>while</span> <span class='not not kw'>not</span> <span class='@tempfile ivar id'>@tempfile</span><span class='dot token'>.</span><span class='eof identifier id'>eof</span>                             <span class='comment val'># print last half</span>
      <span class='yield yield kw'>yield</span> <span class='@tempfile ivar id'>@tempfile</span><span class='dot token'>.</span><span class='gets identifier id'>gets</span>
    <span class='end end kw'>end</span>

  <span class='else else kw'>else</span>                     <span class='comment val'># we can print everything</span>
    <span class='@tempfile ivar id'>@tempfile</span><span class='dot token'>.</span><span class='rewind identifier id'>rewind</span>
    <span class='while while kw'>while</span> <span class='not not kw'>not</span> <span class='@tempfile ivar id'>@tempfile</span><span class='dot token'>.</span><span class='eof identifier id'>eof</span>
      <span class='yield yield kw'>yield</span> <span class='@tempfile ivar id'>@tempfile</span><span class='dot token'>.</span><span class='gets identifier id'>gets</span>
    <span class='end end kw'>end</span>
  <span class='end end kw'>end</span>

  <span class='yield yield kw'>yield</span> <span class='string val'>''</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="err-instance_method">
  
    - (<tt>Object</tt>) <strong>err</strong>(*strs) 
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>Log messages using the ERR severity</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


101
102
103</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File '/Users/fischer/WorkProjects/daitss2/datyl/lib/datyl/reporter.rb', line 101</span>

<span class='def def kw'>def</span> <span class='err identifier id'>err</span> <span class='mult op'>*</span><span class='strs identifier id'>strs</span>
  <span class='dolog identifier id'>dolog</span><span class='lparen token'>(</span><span class='mult op'>*</span><span class='strs identifier id'>strs</span><span class='rparen token'>)</span> <span class='lbrace token'>{</span> <span class='bitor op'>|</span><span class='s identifier id'>s</span><span class='bitor op'>|</span> <span class='Logger constant id'>Logger</span><span class='dot token'>.</span><span class='err identifier id'>err</span> <span class='s identifier id'>s</span> <span class='rbrace token'>}</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="info-instance_method">
  
    - (<tt>Object</tt>) <strong>info</strong>(*strs) 
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>Log messages using the INFO severity</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


89
90
91</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File '/Users/fischer/WorkProjects/daitss2/datyl/lib/datyl/reporter.rb', line 89</span>

<span class='def def kw'>def</span> <span class='info identifier id'>info</span> <span class='mult op'>*</span><span class='strs identifier id'>strs</span>
  <span class='dolog identifier id'>dolog</span><span class='lparen token'>(</span><span class='mult op'>*</span><span class='strs identifier id'>strs</span><span class='rparen token'>)</span> <span class='lbrace token'>{</span> <span class='bitor op'>|</span><span class='s identifier id'>s</span><span class='bitor op'>|</span> <span class='Logger constant id'>Logger</span><span class='dot token'>.</span><span class='info identifier id'>info</span> <span class='s identifier id'>s</span> <span class='rbrace token'>}</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="interesting?-instance_method">
  
    - (<tt>Boolean</tt>) <strong>interesting?</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>interesting? is true if anything has been reported - some reports could be
empty</p>


  </div>
</div>
<div class="tags">
  
<h3>Returns:</h3>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


112
113
114</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File '/Users/fischer/WorkProjects/daitss2/datyl/lib/datyl/reporter.rb', line 112</span>

<span class='def def kw'>def</span> <span class='interesting? fid id'>interesting?</span>
  <span class='@counter ivar id'>@counter</span> <span class='gt op'>&gt;</span> <span class='integer val'>0</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="rewind-instance_method">
  
    - (<tt>Object</tt>) <strong>rewind</strong> 
  

  
</p><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


106
107
108</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File '/Users/fischer/WorkProjects/daitss2/datyl/lib/datyl/reporter.rb', line 106</span>

<span class='def def kw'>def</span> <span class='rewind identifier id'>rewind</span>
  <span class='@tempfile ivar id'>@tempfile</span><span class='dot token'>.</span><span class='rewind identifier id'>rewind</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="warn-instance_method">
  
    - (<tt>Object</tt>) <strong>warn</strong>(*strs) 
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>Log messages using the WARN severity</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


95
96
97</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File '/Users/fischer/WorkProjects/daitss2/datyl/lib/datyl/reporter.rb', line 95</span>

<span class='def def kw'>def</span> <span class='warn identifier id'>warn</span> <span class='mult op'>*</span><span class='strs identifier id'>strs</span>
  <span class='dolog identifier id'>dolog</span><span class='lparen token'>(</span><span class='mult op'>*</span><span class='strs identifier id'>strs</span><span class='rparen token'>)</span> <span class='lbrace token'>{</span> <span class='bitor op'>|</span><span class='s identifier id'>s</span><span class='bitor op'>|</span> <span class='Logger constant id'>Logger</span><span class='dot token'>.</span><span class='warn identifier id'>warn</span> <span class='s identifier id'>s</span> <span class='rbrace token'>}</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="write-instance_method">
  
    - (<tt>Object</tt>) <strong>write</strong>(io = STDOUT) 
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>Write the report to the provided IO object, STDOUT by default. Only
@@max_lines lines of text are written, split equally between the beggining
and end of the report, with an elipsis inserted in between.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


168
169
170
171
172</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File '/Users/fischer/WorkProjects/daitss2/datyl/lib/datyl/reporter.rb', line 168</span>

<span class='def def kw'>def</span> <span class='write identifier id'>write</span> <span class='io identifier id'>io</span> <span class='assign token'>=</span> <span class='STDOUT constant id'>STDOUT</span>
  <span class='each identifier id'>each</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='line identifier id'>line</span><span class='bitor op'>|</span>
    <span class='io identifier id'>io</span><span class='dot token'>.</span><span class='puts identifier id'>puts</span> <span class='line identifier id'>line</span>
  <span class='end end kw'>end</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>
    
    <div id="footer">
  Generated on Mon Nov 21 11:33:23 2011 by 
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.7.3 (ruby-1.8.7).
</div>

  </body>
</html>